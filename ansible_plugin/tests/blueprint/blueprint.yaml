tosca_definitions_version: cloudify_dsl_1_0

imports:
    - http://www.getcloudify.org/spec/cloudify/3.1/types.yaml

plugins:
  cloudify-ansible-plugin:
    executor: central_deployment_agent
    source: https://github.com/earthmant/cloudify-ansible-plugin/archive/master.zip

inputs:
    package_name:
        default: "ansible"
        type: string

node_templates:
    ansible_manager:
        type: cloudify.nodes.ApplicationModule
        interfaces:
            cloudify.interfaces.lifecycle:
                create:
                    implementation: cloudify-ansible-plugin.ansible_plugin.install.install_package
                    inputs:
                        package: { get_input: package_name }
