tosca_definitions_version: cloudify_dsl_1_3

imports:
  - https://cloudify.co/spec/cloudify/6.3.0/types.yaml
  - plugin:cloudify-ansible-plugin

node_templates:

  example:
    type: cloudify.nodes.ansible.Executor
    properties:
      sources:
        vms:
          hosts:
            ansible_connection: winrm
            ansible_user: ansible
            # ansible_password: ''
            ansible_winrm_transport: kerberos
            ansible_winrm_server_cert_validation: true
            ansible_port: 5985
      playbook_path: playbook.yml
      ansible_env_vars:
        ANSIBLE_INVALID_TASK_ATTRIBUTE_FAILED: "False"
        ANSIBLE_HOST_KEY_CHECKING: "False"
        ANSIBLE_STDOUT_CALLBACK: dense
      kerberos_config: |
        [libdefaults]
            default_realm = LEDZEPPELINSUCKS.COM
            kdc_timesync = 1
            ccache_type = 4
            forwardable = true
            proxiable = true
            fcc-mit-ticketflags = true
        [realms]
            LEDZEPPELINSUCKS.COM = {
                kdc = rd5392server.ledzeppelinsucks.com
                admin_server = rd5392server.ledzeppelinsucks.com
            }
        [domain_realm]
            ledzeppelinsucks.com = LEDZEPPELINSUCKS.COM
            .ledzeppelinsucks.com = LEDZEPPELINSUCKS.COM
